<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kd.ppms_email.mapper.SMSRecordMapper">
    <resultMap id="BaseResultMap" type="com.kd.ppms_email.entity.SMSRecord">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="gen_time" jdbcType="TIMESTAMP" property="genTime"/>
        <result column="acc_no" jdbcType="VARCHAR" property="accNo"/>
        <result column="cell_number" jdbcType="VARCHAR" property="cellNumber"/>
        <result column="sms_txt" jdbcType="VARCHAR" property="smsTxt"/>
        <result column="send_times" jdbcType="INTEGER" property="sendTimes"/>
        <result column="first_send_time" jdbcType="TIMESTAMP" property="firstSendTime"/>
        <result column="last_send_time" jdbcType="TIMESTAMP" property="lastSendTime"/>
        <result column="flag" jdbcType="VARCHAR" property="flag"/>
        <result column="start_time" jdbcType="VARCHAR" property="startTime"/>
        <result column="end_time" jdbcType="VARCHAR" property="endTime"/>
        <result column="already_send_times" jdbcType="INTEGER" property="alreadySendTimes"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        id, gen_time, acc_no, cell_number, sms_txt, send_times, first_send_time, last_send_time,
        flag, start_time, end_time, already_send_times
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        select
        <include refid="Base_Column_List"/>
        from SMS_REC
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        delete from SMS_REC
        where id = #{id,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.kd.ppms_email.entity.SMSRecord">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT SCOPE_IDENTITY()
        </selectKey>
        insert into SMS_REC (gen_time, acc_no, cell_number,
        sms_txt, send_times, first_send_time,
        last_send_time, flag, start_time,
        end_time, already_send_times)
        values (#{genTime,jdbcType=TIMESTAMP}, #{accNo,jdbcType=VARCHAR}, #{cellNumber,jdbcType=VARCHAR},
        #{smsTxt,jdbcType=VARCHAR}, #{sendTimes,jdbcType=INTEGER}, #{firstSendTime,jdbcType=TIMESTAMP},
        #{lastSendTime,jdbcType=TIMESTAMP}, #{flag,jdbcType=VARCHAR}, #{startTime,jdbcType=VARCHAR},
        #{endTime,jdbcType=VARCHAR}, #{alreadySendTimes,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" parameterType="com.kd.ppms_email.entity.SMSRecord">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        <selectKey keyProperty="id" order="AFTER" resultType="java.lang.Integer">
            SELECT SCOPE_IDENTITY()
        </selectKey>
        insert into SMS_REC
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="genTime != null">
                gen_time,
            </if>
            <if test="accNo != null">
                acc_no,
            </if>
            <if test="cellNumber != null">
                cell_number,
            </if>
            <if test="smsTxt != null">
                sms_txt,
            </if>
            <if test="sendTimes != null">
                send_times,
            </if>
            <if test="firstSendTime != null">
                first_send_time,
            </if>
            <if test="lastSendTime != null">
                last_send_time,
            </if>
            <if test="flag != null">
                flag,
            </if>
            <if test="startTime != null">
                start_time,
            </if>
            <if test="endTime != null">
                end_time,
            </if>
            <if test="alreadySendTimes != null">
                already_send_times,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="genTime != null">
                #{genTime,jdbcType=TIMESTAMP},
            </if>
            <if test="accNo != null">
                #{accNo,jdbcType=VARCHAR},
            </if>
            <if test="cellNumber != null">
                #{cellNumber,jdbcType=VARCHAR},
            </if>
            <if test="smsTxt != null">
                #{smsTxt,jdbcType=VARCHAR},
            </if>
            <if test="sendTimes != null">
                #{sendTimes,jdbcType=INTEGER},
            </if>
            <if test="firstSendTime != null">
                #{firstSendTime,jdbcType=TIMESTAMP},
            </if>
            <if test="lastSendTime != null">
                #{lastSendTime,jdbcType=TIMESTAMP},
            </if>
            <if test="flag != null">
                #{flag,jdbcType=VARCHAR},
            </if>
            <if test="startTime != null">
                #{startTime,jdbcType=VARCHAR},
            </if>
            <if test="endTime != null">
                #{endTime,jdbcType=VARCHAR},
            </if>
            <if test="alreadySendTimes != null">
                #{alreadySendTimes,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.kd.ppms_email.entity.SMSRecord">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        update SMS_REC
        <set>
            <if test="genTime != null">
                gen_time = #{genTime,jdbcType=TIMESTAMP},
            </if>
            <if test="accNo != null">
                acc_no = #{accNo,jdbcType=VARCHAR},
            </if>
            <if test="cellNumber != null">
                cell_number = #{cellNumber,jdbcType=VARCHAR},
            </if>
            <if test="smsTxt != null">
                sms_txt = #{smsTxt,jdbcType=VARCHAR},
            </if>
            <if test="sendTimes != null">
                send_times = #{sendTimes,jdbcType=INTEGER},
            </if>
            <if test="firstSendTime != null">
                first_send_time = #{firstSendTime,jdbcType=TIMESTAMP},
            </if>
            <if test="lastSendTime != null">
                last_send_time = #{lastSendTime,jdbcType=TIMESTAMP},
            </if>
            <if test="flag != null">
                flag = #{flag,jdbcType=VARCHAR},
            </if>
            <if test="startTime != null">
                start_time = #{startTime,jdbcType=VARCHAR},
            </if>
            <if test="endTime != null">
                end_time = #{endTime,jdbcType=VARCHAR},
            </if>
            <if test="alreadySendTimes != null">
                already_send_times = #{alreadySendTimes,jdbcType=INTEGER},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.kd.ppms_email.entity.SMSRecord">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Oct 23 14:14:45 GMT+08:00 2018.
        -->
        update SMS_REC
        set gen_time = #{genTime,jdbcType=TIMESTAMP},
        acc_no = #{accNo,jdbcType=VARCHAR},
        cell_number = #{cellNumber,jdbcType=VARCHAR},
        sms_txt = #{smsTxt,jdbcType=VARCHAR},
        send_times = #{sendTimes,jdbcType=INTEGER},
        first_send_time = #{firstSendTime,jdbcType=TIMESTAMP},
        last_send_time = #{lastSendTime,jdbcType=TIMESTAMP},
        flag = #{flag,jdbcType=VARCHAR},
        start_time = #{startTime,jdbcType=VARCHAR},
        end_time = #{endTime,jdbcType=VARCHAR},
        already_send_times = #{alreadySendTimes,jdbcType=INTEGER}
        where id = #{id,jdbcType=INTEGER}
    </update>
    <select id="selectByCondition" resultMap="BaseResultMap" parameterType="java.lang.String">
        select
        <include refid="Base_Column_List"/>
        from sms_rec
        where flag IS NULL
        <if test="flag != null">
            OR flag = #{flag,jdbcType=VARCHAR}
        </if>
        ORDER BY gen_time ASC
    </select>
    <select id="selectByFlag" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from sms_rec
        where 1=1
        <if test="flag != null">
            AND flag = #{flag,jdbcType=VARCHAR}
        </if>
        <if test="sendTimes != null">
            AND send_times = #{sendTimes,jdbcType=INTEGER}
        </if>
    </select>

    <!--&amp;amp;lt;update id="batchUpdate" parameterType="java.util.List"&amp;amp;gt;-->
    <!--update sms_rec-->
    <!--set  flag=-->
    <!--&amp;amp;lt;foreach collection="list" item="item" index="index"-->
    <!--separator=" " open="case ID" close="end"&amp;amp;gt;-->
    <!--when #{item.smsNo} then #{item.flag}-->
    <!--&amp;amp;lt;/foreach&amp;amp;gt;-->
    <!--where id in-->
    <!--&amp;amp;lt;foreach collection="list" index="index" item="item"-->
    <!--separator="," open="(" close=")"&amp;amp;gt;-->
    <!--#{item.smsNo,jdbcType=INTEGER}-->
    <!--&amp;amp;lt;/foreach&amp;amp;gt;-->
    <!--&amp;amp;lt;/update&amp;amp;gt;-->
    <!--&amp;lt;update id="batchUpdate" parameterType="java.util.List"&amp;gt;-->
    <!--update sms_rec-->
    <!--&amp;lt;foreach collection="list" item="sms" index="index" separator=","&amp;gt;-->
    <!--&amp;lt;set&amp;gt;-->
    <!--&amp;lt;if test="sms.flag!=null"&amp;gt;-->
    <!--flag = #{sms.flag},-->
    <!--&amp;lt;/if&amp;gt;-->
    <!--&amp;lt;if test="sms.firstSendTime != null"&amp;gt;-->
    <!--first_send_time = #{sms.firstSendTime},-->
    <!--&amp;lt;/if&amp;gt;-->
    <!--&amp;lt;if test="sms.lastSendTime != null"&amp;gt;-->
    <!--last_send_time = #{sms.lastSendTime}-->
    <!--&amp;lt;/if&amp;gt;-->
    <!--&amp;lt;/set&amp;gt;-->
    <!--where id =#{sms.id,jdbcType=INTEGER}-->
    <!--&amp;lt;/foreach&amp;gt;-->
    <!--&amp;lt;/update&amp;gt;-->
    <update id="batchUpdate" parameterType="java.util.List">
        update sms_rec
        <trim prefix="set" suffixOverrides=",">
            <trim prefix="flag =case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when id=#{item.id} then #{item.flag}
                </foreach>
            </trim>
            <trim prefix="first_send_time =case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when id=#{item.id} then #{item.firstSendTime}
                </foreach>
            </trim>
            <trim prefix="last_send_time =case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when id=#{item.id} then #{item.lastSendTime}
                </foreach>
            </trim>
        </trim>
        where id in
        <foreach close=")" collection="list" index="index" item="item" open="(" separator=",">
            #{item.id,jdbcType=INTEGER}
        </foreach>
    </update>

</mapper>